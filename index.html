<script>
const cevapHavuzu = [
  "Bu soruya yaklaşırken biraz durup düşünmek gerekiyor.",
  "Açık konuşayım, bu konu sandığından daha derin.",
  "Bunu tek cümleyle açıklamak pek mümkün değil.",
  "Sorunun özü güzel ama cevabı o kadar basit değil.",
  "Bu meseleye farklı bir açıdan bakmak faydalı olabilir.",
  "Mantık yürütürsek birkaç ihtimal ön plana çıkıyor.",
  "Bence burada gözden kaçan küçük bir detay var.",
  "Bu tür sorular genelde insanı düşünmeye zorlar.",
  "Net konuşmak gerekirse kesin bir yargıya varmak zor.",
  "Bu konunun cevabı duruma göre değişebilir.",
  "Bunu düşünürken farklı senaryolar akla geliyor.",
  "Söylediğin şey mantıksız değil ama eksik.",
  "Bu soru beklediğimden daha ilginç çıktı.",
  "Aslında cevap basit gibi duruyor ama değil.",
  "Bence burada önemli olan bakış açısı.",
  "Bu konu üzerine saatlerce konuşulabilir.",
  "Bunu cevaplamak için biraz düşünmek lazım.",
  "Sorunun kendisi cevabından daha dikkat çekici.",
  "Bu konuda kesin konuşanlara pek güvenmem.",
  "Açıkçası bu soru beni biraz düşündürdü."
];

// Kullanıcıya söylenen cevapları tutar
let kullanilanCevaplar = JSON.parse(
  localStorage.getItem("kullanilanCevaplar")
) || [];

function benzersizCevapUret() {
  const kalanlar = cevapHavuzu.filter(
    c => !kullanilanCevaplar.includes(c)
  );

  // Hepsi bittiyse sıfırla
  if (kalanlar.length === 0) {
    kullanilanCevaplar = [];
    localStorage.setItem(
      "kullanilanCevaplar",
      JSON.stringify(kullanilanCevaplar)
    );
    return benzersizCevapUret();
  }

  const secilen = kalanlar[Math.floor(Math.random() * kalanlar.length)];
  kullanilanCevaplar.push(secilen);
  localStorage.setItem(
    "kullanilanCevaplar",
    JSON.stringify(kullanilanCevaplar)
  );
  return secilen;
}

// MESAJ GÖNDERME
input.addEventListener("keydown", e => {
  if (e.key !== "Enter" || !input.value.trim()) return;

  const text = input.value.trim();
  input.value = "";

  mesajEkle("user", text);

  const reply = benzersizCevapUret();

  setTimeout(() => {
    mesajEkle("bot", reply);
  }, 400);
});
</script>
